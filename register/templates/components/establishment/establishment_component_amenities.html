{% extends 'components/establishment/establishment_component_base.html' %}
{% load static %}

{% block title %}Comodidades{% endblock %}

{% block buttons %}
<a id="card-amenities" href="{% url 'register:establishment_update_amenities' establishment.pk %}"> Editar </a>
{% endblock buttons %}

{% block content %}
{% for amenity in amenities %}
<label class="label is-size-6 has-text-weight-normal has-text-secondary amenities-control"> <i
    class="amenities {{ amenity.name }}-no-color"></i> {{ amenity.name }}</label>
{% endfor %}

<div class="modal table_item">
  <div class="modal-background"></div>
  <div class="modal-content"></div>
  <button class="modal-close is-large" aria-label="close"></button>
</div>

<script>
  $("a#card-amenities").click(function (e) {
    e.stopImmediatePropagation(); // those pesky handlers
    e.preventDefault();
    url = this.href;

    $.get(url, function () {
      console.log("Fetching data");
    })
      .done(function (data) {
        console.log("Data fetched succesfully :)");
        $(".modal.table_item > .modal-content").html(data);
        $(".modal.table_item").addClass("is-active");
        $(".modal .modal-content button.is-danger").click(function () {
          $(".modal").removeClass("is-active");
        });
      })
      .fail(function (xhr) {
        console.log("Error: ", xhr);
      });

    $(".modal-close, .modal-background").click(function () {
      $(".modal").removeClass("is-active");
    });
  });
</script>


{% endblock content %}